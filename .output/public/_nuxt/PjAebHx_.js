import{d as C,S as k,r as g,c as I,t as a,v as d,x as e,T as N,U as V,N as l,V as M,P as v,O as w,M as y,B as $,y as p,Q as L,q as S,o as T,z as x,W as j}from"./CLaJQLD1.js";import{u as B}from"./CO2-aSQ6.js";import{s as U}from"./Cz6CupwL.js";const K={class:"shrink-0 pt-2 px-2"},O={class:"grow-[0] h-full overflow-y-scroll scrollbar-hide"},P=["onClick"],W=["src"],z=C({__name:"stockMenu",props:{indices:{}},setup(h){const _=k(),n=_.nameList,r=_.codeList,s=h,t=g(""),u=I(()=>{const i={};return s.indices!==void 0&&s.indices!==null&&typeof s.indices=="object"&&Object.keys(s.indices).forEach(c=>{const o=s.indices[c].filter(b=>c.toLowerCase().includes(t.value.toLowerCase()));o.length>0&&(i[c]=o)}),i}),f=B("selectedCountry"),m=({name:i,indiceList:c})=>{f.value={name:i,indiceList:c},S(`/stock/${n[i]}`)};return(i,c)=>(a(),d(v,null,[e("div",K,[N(e("input",{class:"px-4 py-2 w-full focus:outline-none border rounded",type:"text",placeholder:"search","onUpdate:modelValue":c[0]||(c[0]=o=>M(t)?t.value=o:null)},null,512),[[V,l(t)]])]),e("div",O,[i.indices?(a(!0),d(v,{key:0},w(Object.entries(l(u)),([o,b])=>(a(),d("div",{class:y(["px-4 py-2 mx-2 my-1 rounded cursor-pointer text-xs flex gap-2 items-center",[l(f).name===o?"bg-black text-white hover:bg-neutral-800":"hover:bg-neutral-100",l(r)[l(n)[o]].countryId==null?"text-neutral-300":""]]),onClick:oe=>m({name:o,indiceList:b})},[e("img",{class:"rounded-full border border-neutral-600",src:`https://s3-symbol-logo.tradingview.com/country/${l(n)[o].toUpperCase()}.svg`},null,8,W),$(" "+p(o=="Hong"?"Hong Kong":o),1)],10,P))),256)):L("",!0)])],64))}}),D={class:"px-4 py-2 font-bold flex gap-2 items-center"},E=["src"],H={class:"flex divide-x"},q={class:"text-xs px-4 py-2 flex gap-2 items-center"},A={class:"font-bold pr-2"},F={class:"flex gap-2"},Q={class:"flex gap-1"},R=e("div",{class:"text-neutral-400"},"변동",-1),G={class:"flex gap-1"},J=e("div",{class:"text-neutral-400"},"변동%",-1),X=C({__name:"stockBar",props:{selectedCountry:{}},setup(h){const n=k().nameList;return(r,s)=>(a(),d(v,null,[e("div",D,[e("img",{class:"h-fit border border-neutral-400",src:`https://s3-symbol-logo.tradingview.com/country/${l(n)[r.selectedCountry.name].toUpperCase()}.svg`},null,8,E),$(" "+p(r.selectedCountry.name),1)]),e("div",H,[(a(!0),d(v,null,w(r.selectedCountry.indiceList,t=>(a(),d("div",q,[e("div",A,p(t.index),1),e("div",F,[e("div",Q,[R,e("div",{class:y(t.change.startsWith("+")?"text-red-500":"text-blue-500")},p(t.change),3)]),e("div",G,[J,e("div",{class:y(t.change.startsWith("+")?"text-red-500":"text-blue-500")},p(t.changePercent),3)])])]))),256))])],64))}}),Y={class:"grow-[0] h-full flex divide-x overflow-hidden"},Z={class:"flex flex-col shrink-0 w-36 h-full"},ee={class:"flex flex-col grow-[0] overflow-hidden h-full w-full"},se={key:0,class:"shrink-0 flex divide-x border-b"},te={class:"grow-[0] overflow-hidden h-full"},ie=C({__name:"stock",setup(h){const _=g();T(()=>{r(),_.value=U(r,1001*60*10)});const n=g({}),r=()=>{fetch("/api/investing/indices").then(u=>u.json()).then(u=>{n.value=u,t()})},s=B("selectedCountry"),t=()=>{s.value!=null?s.value={name:s.value.name,indiceList:n.value[s.value.name]}:s.value={name:"Korea",indiceList:n.value.Korea}};return(u,f)=>{const m=z,i=X,c=j;return a(),d("div",Y,[e("div",Z,[x(m,{indices:l(n)},null,8,["indices"])]),e("div",ee,[l(s)?(a(),d("div",se,[x(i,{selectedCountry:l(s)},null,8,["selectedCountry"])])):L("",!0),e("div",te,[x(c)])])])}}});export{ie as default};
