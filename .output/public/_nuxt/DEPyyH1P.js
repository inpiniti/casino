import{d as g,S as b,r as m,c as B,t as r,v as d,x as e,T as N,U as V,N as a,V as I,P as _,O as k,M as x,B as w,y as p,Q as $,q as M,o as S,z as f,W as T}from"./BPW4KkXu.js";import{u as L}from"./DD_ixT-R.js";import{s as j}from"./BwMrd1Vg.js";const U={class:"shrink-0 pt-2 px-2"},K={class:"grow-[0] h-full overflow-y-scroll scrollbar-hide"},O=["onClick"],P=["src"],W=g({__name:"stockMenu",props:{indices:{}},setup(h){const c=b().nameList,t=h,s=m(""),l=B(()=>{const i={};return t.indices!==void 0&&t.indices!==null&&typeof t.indices=="object"&&Object.keys(t.indices).forEach(n=>{const o=t.indices[n].filter(C=>n.toLowerCase().includes(s.value.toLowerCase()));o.length>0&&(i[n]=o)}),i}),u=L("selectedCountry"),y=({name:i,indiceList:n})=>{u.value={name:i,indiceList:n},M(`/stock/${c[i]}`)};return(i,n)=>(r(),d(_,null,[e("div",U,[N(e("input",{class:"px-4 py-2 w-full focus:outline-none border rounded",type:"text",placeholder:"search","onUpdate:modelValue":n[0]||(n[0]=o=>I(s)?s.value=o:null)},null,512),[[V,a(s)]])]),e("div",K,[i.indices?(r(!0),d(_,{key:0},k(Object.entries(a(l)),([o,C])=>(r(),d("div",{class:x(["px-4 py-2 mx-2 my-1 rounded cursor-pointer text-xs flex gap-2 items-center",a(u).name===o?"bg-black text-white hover:bg-neutral-800":"hover:bg-neutral-100"]),onClick:te=>y({name:o,indiceList:C})},[e("img",{class:"rounded-full border border-neutral-600",src:`https://s3-symbol-logo.tradingview.com/country/${a(c)[o].toUpperCase()}.svg`},null,8,P),w(" "+p(o=="Hong"?"Hong Kong":o),1)],10,O))),256)):$("",!0)])],64))}}),z={class:"px-4 py-2 font-bold flex gap-2 items-center"},D=["src"],E={class:"flex divide-x"},H={class:"text-xs px-4 py-2 flex gap-2 items-center"},q={class:"font-bold pr-2"},A={class:"flex gap-2"},F={class:"flex gap-1"},Q=e("div",{class:"text-neutral-400"},"변동",-1),R={class:"flex gap-1"},G=e("div",{class:"text-neutral-400"},"변동%",-1),J=g({__name:"stockBar",props:{selectedCountry:{}},setup(h){const c=b().nameList;return(t,s)=>(r(),d(_,null,[e("div",z,[e("img",{class:"h-fit border border-neutral-400",src:`https://s3-symbol-logo.tradingview.com/country/${a(c)[t.selectedCountry.name].toUpperCase()}.svg`},null,8,D),w(" "+p(t.selectedCountry.name),1)]),e("div",E,[(r(!0),d(_,null,k(t.selectedCountry.indiceList,l=>(r(),d("div",H,[e("div",q,p(l.index),1),e("div",A,[e("div",F,[Q,e("div",{class:x(l.change.startsWith("+")?"text-red-500":"text-blue-500")},p(l.change),3)]),e("div",R,[G,e("div",{class:x(l.change.startsWith("+")?"text-red-500":"text-blue-500")},p(l.changePercent),3)])])]))),256))])],64))}}),X={class:"grow-[0] h-full flex divide-x overflow-hidden"},Y={class:"flex flex-col shrink-0 w-36 h-full"},Z={class:"flex flex-col grow-[0] overflow-hidden h-full w-full"},ee={key:0,class:"shrink-0 flex divide-x border-b"},se={class:"grow-[0] overflow-hidden h-full"},le=g({__name:"stock",setup(h){const v=m();S(()=>{t(),v.value=j(t,1001*60*10)});const c=m({}),t=()=>{fetch("/api/investing/indices").then(u=>u.json()).then(u=>{c.value=u,l()})},s=L("selectedCountry"),l=()=>{s.value!=null?s.value={name:s.value.name,indiceList:c.value[s.value.name]}:s.value={name:"Korea",indiceList:c.value.Korea}};return(u,y)=>{const i=W,n=J,o=T;return r(),d("div",X,[e("div",Y,[f(i,{indices:a(c)},null,8,["indices"])]),e("div",Z,[a(s)?(r(),d("div",ee,[f(n,{selectedCountry:a(s)},null,8,["selectedCountry"])])):$("",!0),e("div",se,[f(o)])])])}}});export{le as default};
