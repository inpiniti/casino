import{d as C,S as k,r as g,c as I,t as a,v as d,x as e,T as N,U as V,N as l,V as M,P as h,O as w,M as y,B as $,y as _,Q as L,u as S,o as j,z as x,W as T}from"./BnzBy11L.js";import{u as B}from"./Ds4AHcRg.js";import{s as U}from"./x_rD_Ya3.js";const K={class:"shrink-0 pt-2 px-2"},O={class:"grow-[0] h-full overflow-y-scroll scrollbar-hide"},P=["onClick"],W=["src"],z=C({__name:"stockMenu",props:{indices:{}},setup(v){const p=k(),n=p.nameList,i=p.codeList,s=v,t=g(""),u=I(()=>{const r={};return s.indices!==void 0&&s.indices!==null&&typeof s.indices=="object"&&Object.keys(s.indices).forEach(c=>{const o=s.indices[c].filter(b=>c.toLowerCase().includes(t.value.toLowerCase()));o.length>0&&(r[c]=o)}),r}),f=B("selectedCountry"),m=({name:r,indiceList:c})=>{f.value={name:r,indiceList:c},S().push({path:`/stock/${n[r]}`})};return(r,c)=>(a(),d(h,null,[e("div",K,[N(e("input",{class:"px-4 py-2 w-full focus:outline-none border rounded",type:"text",placeholder:"search","onUpdate:modelValue":c[0]||(c[0]=o=>M(t)?t.value=o:null)},null,512),[[V,l(t)]])]),e("div",O,[r.indices?(a(!0),d(h,{key:0},w(Object.entries(l(u)),([o,b])=>(a(),d("div",{class:y(["px-4 py-2 mx-2 my-1 rounded cursor-pointer text-xs flex gap-2 items-center",[l(f).name===o?"bg-black text-white hover:bg-neutral-800":"hover:bg-neutral-100",l(i)[l(n)[o]].countryId==null?"text-neutral-300":""]]),onClick:oe=>m({name:o,indiceList:b})},[e("img",{class:"rounded-full border border-neutral-600",src:`https://s3-symbol-logo.tradingview.com/country/${l(n)[o].toUpperCase()}.svg`},null,8,W),$(" "+_(o=="Hong"?"Hong Kong":o),1)],10,P))),256)):L("",!0)])],64))}}),D={class:"px-4 py-2 font-bold flex gap-2 items-center"},E=["src"],H={class:"flex divide-x"},R={class:"text-xs px-4 py-2 flex gap-2 items-center"},A={class:"font-bold pr-2"},F={class:"flex gap-2"},Q={class:"flex gap-1"},q=e("div",{class:"text-neutral-400"},"변동",-1),G={class:"flex gap-1"},J=e("div",{class:"text-neutral-400"},"변동%",-1),X=C({__name:"stockBar",props:{selectedCountry:{}},setup(v){const n=k().nameList;return(i,s)=>(a(),d(h,null,[e("div",D,[e("img",{class:"h-fit border border-neutral-400",src:`https://s3-symbol-logo.tradingview.com/country/${l(n)[i.selectedCountry.name].toUpperCase()}.svg`},null,8,E),$(" "+_(i.selectedCountry.name),1)]),e("div",H,[(a(!0),d(h,null,w(i.selectedCountry.indiceList,t=>(a(),d("div",R,[e("div",A,_(t.index),1),e("div",F,[e("div",Q,[q,e("div",{class:y(t.change.startsWith("+")?"text-red-500":"text-blue-500")},_(t.change),3)]),e("div",G,[J,e("div",{class:y(t.change.startsWith("+")?"text-red-500":"text-blue-500")},_(t.changePercent),3)])])]))),256))])],64))}}),Y={class:"grow-[0] h-full flex divide-x overflow-hidden"},Z={class:"flex flex-col shrink-0 w-36 h-full"},ee={class:"flex flex-col grow-[0] overflow-hidden h-full w-full"},se={key:0,class:"shrink-0 flex divide-x border-b"},te={class:"grow-[0] overflow-hidden h-full"},re=C({__name:"stock",setup(v){const p=g();j(()=>{i(),p.value=U(i,1001*60*10)});const n=g({}),i=()=>{fetch("/api/investing/indices").then(u=>u.json()).then(u=>{n.value=u,t()})},s=B("selectedCountry"),t=()=>{s.value!=null?s.value={name:s.value.name,indiceList:n.value[s.value.name]}:s.value={name:"Korea",indiceList:n.value.Korea}};return(u,f)=>{const m=z,r=X,c=T;return a(),d("div",Y,[e("div",Z,[x(m,{indices:l(n)},null,8,["indices"])]),e("div",ee,[l(s)?(a(),d("div",se,[x(r,{selectedCountry:l(s)},null,8,["selectedCountry"])])):L("",!0),e("div",te,[x(c)])])])}}});export{re as default};
