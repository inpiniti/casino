import{d as y,S as w,r as h,c as k,t as u,v as p,x as l,T as b,U as L,N as c,V as $,P as x,O as I,M as N,B as V,y as M,Q as j,u as B,o as S,z as g,W as T}from"./CcCOcpRy.js";import{u as C}from"./3YLIpOFV.js";import{s as K}from"./clTxLlGS.js";const O={class:"shrink-0 h-14 px-2 flex items-center"},U={class:"grow-[0] h-full overflow-y-scroll scrollbar-hide"},z=["onClick"],D=["src"],E=y({__name:"stockMenu",props:{indices:{}},setup(_){const a=w(),o=a.nameList,d=a.codeList,s=_,i=h(""),r=k(()=>{const t={};return s.indices!==void 0&&s.indices!==null&&typeof s.indices=="object"&&Object.keys(s.indices).forEach(n=>{const e=s.indices[n].filter(m=>n.toLowerCase().includes(i.value.toLowerCase()));e.length>0&&(t[n]=e)}),t}),v=C("selectedCountry"),f=({name:t,indiceList:n})=>{v.value={name:t,indiceList:n},B().push({path:`/stock/${o[t]}`})};return(t,n)=>(u(),p(x,null,[l("div",O,[b(l("input",{class:"px-4 py-1.5 w-full focus:outline-none border rounded",type:"text",placeholder:"search","onUpdate:modelValue":n[0]||(n[0]=e=>$(i)?i.value=e:null)},null,512),[[L,c(i)]])]),l("div",U,[t.indices?(u(!0),p(x,{key:0},I(Object.entries(c(r)),([e,m])=>(u(),p("div",{class:N(["px-4 py-2 mx-2 my-1 rounded cursor-pointer text-xs flex gap-2 items-center",[c(v).name===e?"bg-black text-white hover:bg-neutral-800":"hover:bg-neutral-100",c(d)[c(o)[e]].countryId==null?"text-neutral-300":""]]),onClick:A=>f({name:e,indiceList:m})},[l("img",{class:"rounded-full border border-neutral-600",src:`https://s3-symbol-logo.tradingview.com/country/${c(o)[e].toUpperCase()}.svg`},null,8,D),V(" "+M(e=="Hong"?"Hong Kong":e),1)],10,z))),256)):j("",!0)])],64))}}),H={class:"grow-[0] h-full flex divide-x overflow-hidden"},P={class:"flex flex-col shrink-0 w-36 h-full divide-y"},R={class:"grow-[0] overflow-hidden h-full w-full"},q=y({__name:"stock",setup(_){const a=h();S(()=>{d(),a.value=K(d,1001*60*10)});const o=h({}),d=()=>{fetch("/api/investing/indices").then(r=>r.json()).then(r=>{o.value=r,i()})},s=C("selectedCountry"),i=()=>{s.value!=null?s.value={name:s.value.name,indiceList:o.value[s.value.name]}:s.value={name:"Korea",indiceList:o.value.Korea}};return(r,v)=>{const f=E,t=T;return u(),p("div",H,[l("div",P,[g(f,{indices:c(o)},null,8,["indices"])]),l("div",R,[g(t)])])}}});export{q as default};
